<!-- Vue3의 Reactivity의 기능 내부를 java 내장 API로 구현-->
<div id="app">

</div>

<script>

    let data = {
        message : "Hello Vue3withoutVue3!!!!"
    }
    // DOM객체에 접근하여 Render하는 함수를 정의한다.
    function render(something){
        let divApp = document.querySelector("#app") // 전위순회하면서 선택자와 일치하는 첫번째 dom반환
        divApp.innerHTML = something // 파라미터로 받은 변수를 divApp내부에 삽입
    }

    // 프록시는 기존 접근제어에 관한 내용을 재정의 한다.

    // 1st parameter : 변경감지를 확인할 data
    // 2nd parameter : 함수형으로 data안 함수가 변경되었다면 실행할 함수를 정의(handler함수)
    let newData = new Proxy(data, { // proxy 변수 선언
        get(target,prop){
             render(target[prop])  // 가져온 변수를 화면에 렌더링한다
        },
        // 차례대로 객체, 속성(필드), 새값 저장시 새로운값이다.
        set(target, prop, newValue){
            target[prop] = newValue; // 새롭게 받은 밸류를 접근된 오브젝트 속성에 반영
            render(target[prop]); // 새로운 값 반영후 화면에 렌더링
            console.log("새로운 값으로 값 변경 변경된 값 : " + target[prop]); // 로그 출력
        }

    }) // proxy를 이용한 vue3 반응성 구현

</script>